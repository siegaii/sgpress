---
title: NPM package.json 版本号详解
date: 2020-02-11 15:55:26
permalink: /pages/478dcc/
categories:
  - 开发笔记
  - NPM
tags:
  - NPM
---

## 项目版本管理

```shell
# 升级补丁版本号
$ npm version patch

# 升级小版本号
$ npm version minor

# 升级大版本号
$ npm version major
```

## version定义规则

+ 主版本号：表示项目的重大架构变更
+ 次版本号：表示较大范围的功能添加和变化
+ 增量版本号：一般表示重大bug修复

<!-- more -->

> eg： 0.0.1-snapshot

### 单词含义对照表

+ snapshot 快照
+ alpha 内测
+ beta 公测
+ release 稳定版本
+ GA 最稳定版本
+ Final 正式版
+ Pro(professional) 专业版
+ Plus 加强版
+ Retail 零售版
+ DEMO 演示版
+ Build 内部标号
+ Delux 豪华版 （deluxe：豪华的，华丽的）
+ Corporation或Enterpraise 企业版
+ M1 M2 M3 M是milestone的简写 里程碑的意思
+ RC 版本 RC:(Release Candidate)，几乎就不会加入新的功能了，而主要着重于除错
+ SR 修正版
+ Trial 试用版
+ Shareware 共享版
+ Full 完全版

## 依赖版本号规则

1. `version`
必须匹配某个版本如：`1.0.0`，表示必须依赖1.0.0版

2. `>version`
必须大于某个版本
如：`>1.0.0`，表示必须大于1.0.0版

3. `>=version`
可大于或等于某个版本
如：`>=1.0.0`，表示可以等于1.0.0，也可以大于1.0.0版本

4. `<version`
必须小于某个版本
如：`<1.0.0`，表示必须小于1.0.0版本

5. `<=version`
可以小于或等于某个版本
如：`<=1.0.0`，表示可以等于1.0.0，也可以小于1.0.0版本

6. `~version`
大概匹配某个版本
如果minor版本号指定了，那么minor版本号不变，而patch版本号任意  
如果minor和patch版本号未指定，那么minor和patch版本号任意  
如：`~1.0.0`，表示`>=1.0.0` `<1.1.0`，可以是1.0.0，1.0.3，1.0.4，.....，1.0.n  
如：`~1.0`，表示`>=1.0.0` `<1.1.0`，可以是同上  
如：`~1`，表示`>=1.0.0` `<2.0.0`，可以是1.0.0，1.0.1，1.0.2，.....，1.0.n，1.1.n，1.2.n，.....，1.n.n  

7. `^version`
兼容某个版本
版本号中最左边的非0数字的右侧可以任意
如果缺少某个版本号，则这个版本号的位置可以任意  
如：`^1.0.0` ，表示`>=1.0.0` `<2.0.0`，可以是1.0.0，1.1.3，.....，1.1.n，1.2.n，.....，1.n.n  
如：^0.2.3 ，表示>=0.2.3 <0.3.0，可以是0.2.3，0.2.4，.....，0.2.n  
如：^0.0，表示 >=0.0.0 <0.1.0，可以是0.0.0，0.0.1，.....，0.0.n  

8. `x-range`x的位置表示任意版本  如：`1.2.x`，表示可以1.2.0，1.2.1，.....，1.2.n

9. `*-range`任意版本，""也表示任意版本  如：*，表示>=0.0.0的任意版本

10. `version1 - version2`
大于等于version1，小于等于version2  
如：`1.0.0 - 1.3.1`，表示包括1.0.0和1.3.1以及他们件的任意版本  

11. `range1 || range2`
满足`range1`或者满足`range2`，可以多个范围  
如：<1.0.0 || >=2.3.1 <2.4.5 || >=2.5.2 <3.0.0，表示满足这3个范围的版本都可以

## lock文件作用
通过上面可知每次下载依赖的版本可能都会不同，这就造成了有时本地build完全没有问题，但是推到服务器或者在别人电脑上就会build失败。  

lock文件会记录所有包的版本以及包的依赖的版本，这样就可以保证每个人下载的依赖版本都是完全相同的，从而避免很多问题。当然npm也有类似功能，不在此赘述。